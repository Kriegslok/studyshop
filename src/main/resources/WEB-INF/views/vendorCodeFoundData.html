<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Title</title>
</head>
<body>
<p th:text="${message}" />
<p th:text="${#lists.size(vendorCodeList)}" />
<table style="border: 1px solid gray; border-collapse: collapse;">
    <tr>
        <th style="border: 1px solid gray;">guid</th>
        <th style="border: 1px solid gray;">Vendor</th>
        <th style="border: 1px solid gray;">Code</th>
        <th style="border: 1px solid gray;">Создан</th>
        <th style="border: 1px solid gray;">Товар</th>
        <th style="border: 1px solid gray;">-</th>

    </tr>
    <tr data-th-each="vendorCode : ${vendorCodeList}">
        <td style="border: 1px solid gray;"><p th:text="${vendorCode.guid}"></p></td>
        <td style="border: 1px solid gray;"><p th:text="${vendorCode.vendor.name}"></p></td>
        <td style="border: 1px solid gray;"><p th:text="${vendorCode.code}"></p></td>
        <td style="border: 1px solid gray;"><p th:text="${vendorCode.dateCreate}"></p></td>
        <td style="border: 1px solid gray;">
            <form method="get" action="/getGoods">
                <input name="vendorCodeGuid" type="hidden" th:value="${vendorCode.guid}"/>
                <input type="submit" value="show goods" />
            </form>
        </td>
        <td style="border: 1px solid gray;">
            <form method="delete" action="/deleteVendorCodes">
                <input name="codeGuid" type="hidden" th:value="${vendorCode.guid}"/>
                <input type="submit" value="Delete" />
            </form>
        </td>
        <td style="border: 1px solid gray;">
            <form onsubmit="return false;">
                <input name="vendorCode" type="hidden" th:value="${vendorCode.guid}"/>
                <input name="vendor" id = "vendor" type="hidden" th:value="${vendorCode.vendor.guid}"/>
                <input name="nameF" id = "nameF" type="text"/>

                <button onclick=myFunction(vendorCode.value,vendor.value,nameF.value)>Click me</button>
            </form>
        </td>
    </tr>


</table>



<script type="text/javascript">
    function myFunction(vendorCode, vendor, name) {
        var xhr = new XMLHttpRequest();
        var url = "/addNewGoods/";
        xhr.open('POST', url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                var json = JSON.parse(xhr.responseText);
                console.log(json);
            }
        };
        var data = JSON.stringify({"vendorCode": vendorCode, "vendor": vendor, "name": name});
        xhr.send(data);
    }


</script>


<br>
<a href="/addNewVendor">Add Vendor</a>
<br>
<a href="/searchVendor">Search Vendor</a>
<br>
<a href="/addNewVendorCode">Add vendor code</a>
<br>
<a href="/searchVendor">Search Vendor</a>

</body></html>
